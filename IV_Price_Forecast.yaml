Please create a price forecast for me for the NG Futures contract using the framework below, use a dates table and prices and probabilities in order to show me the forecast you create, using, 

# Systematic Valuation Framework for Henryâ€¯Hub Naturalâ€‘Gas Futures

*Prepared JuneÂ 2025 â€“ v1.0*

---

## 1â€¯|â€¯Objective

Provide an endâ€‘toâ€‘end, codeâ€‘ready framework that produces a **daily fairâ€‘value** for the promptâ€‘month HenryÂ Hub futures contract (NG<front>), surfaces the screenâ€‘minusâ€‘model premium, and supplies actionable diagnostics (warâ€‘risk, liquidity, storage scarcity) for traders and risk managers.

---

## 2â€¯|â€¯Highâ€‘Level Architecture

mermaid
flowchart LR
    subgraph Data Layer
        A1[EIA, NOAA, PointLogic, CFTC, CME]
        A2[ICE basis, ISO power, DXY]
    end
    subgraph ETL & Feature Eng
        B1[Ingest & QC]
        B2[Lag Alignment]
        B3[Feature Derivation]
    end
    subgraph Models
        C1[Storage Regression]
        C2[Balanceâ€‘Path Simulator]
        C3[Weather Elasticity]
        C4[LNG & Tradeâ€‘Flow Factor]
        C5[Optionsâ€‘Implied Mean]
        C6[ML Residual Learner]
    end
    subgraph Ensemble
        D1[Bayesian Weighting]
    end
    subgraph Outputs
        E1[Fairâ€‘Value Time Series]
        E2[Premium Diagnostics]
        E3[Slack / Telegram Alerts]
    end

    A1 & A2 --> B1 --> B2 --> B3 --> C1 & C2 & C3 & C4 & C5 & C6 --> D1 --> E1 --> E2 --> E3


* **Orchestration:** Airflow 5â€‘min DAG  
* **Languages:** PythonÂ 3.11, pandas, statsmodels, xgboost, pymc, sqlalchemy  
* **Data Store:** TimescaleDB for timeâ€‘series; S3 for raw snapshots  
* **Dashboards:** Grafana + Plotly Dash

---

## 3â€¯|â€¯Data Specification

| Feed | Endpoint/API | Cadence | Latency SLA | Key Fields |
|------|--------------|---------|-------------|------------|
| EIA Weekly Storage | api.eia.gov/NGWSTUS1 | Thu 10:30â€¯ET | 30â€¯s | Working gas, 5â€‘yr avg |
| Pipeline Flow (LNG, Dry Prod) | PointLogicÂ RT | 10â€¯min | 3â€¯min | Bcf/d by facility/pipe |
| NOAA Degreeâ€‘Days | CPC FTP degree_days.txt | 00 & 12â€¯UTC | 20â€¯min | HDD, CDD, GWDD |
| EIAâ€‘930 Power Burn | api.eia.gov/series/series_id=EBA...NG | 15â€¯min | 5â€¯min | NG MWh by ISO |
| CFTC COT | ftp.cftc.gov | Fri 15:30â€¯ET | 15â€¯s | Managedâ€‘money longs/shorts |
| CME CVOL & Options | CME FIXÂ 4.4 | 1â€¯min | 2â€¯s | IV surface, OI |
| ICE Basis Futures | ICE DataConnect | Daily | EOD | Z2, Z3, Z6 close |
| Macro | ICE DXY, CL front month | 1â€¯min | 1â€¯s | Index px |

All raw pulls stored in raw_ingest.<feed>, then rolled to 5â€‘min bars in clean.<topic>.

---

## 4â€¯|â€¯Model Blocks

### 4.1Â Storageâ€‘Differential Regression  
*Regression:*  
\[
P_t = eta_0 + eta_1 \left(rac{S_t - ar S_{5y}}{100}
ight) + eta_2 \left(rac{S_t - ar S_{5y}}{100}
ight)^2 + arepsilon_t
\]  
*Elasticity initialisation:* \(eta_1 = -0.035\), \(eta_2 = -0.003\). Reâ€‘fit quarterly (rolling 3â€¯yrs).

### 4.2Â Balanceâ€‘Path Simulator  
1. Estimate daily supply/demand flows through Octâ€¯31.  
2. Iterate storage path; find price that sets EOE_storage âˆˆ [3.2,Â 3.9]â€¯Tcf using costâ€‘ofâ€‘carry:
\[
P_{prompt} = P_{strip} - rac{c_{carry} + 	ext{fuel loss}}{(1+r)^{T/365}}
\]

### 4.3Â Weather Elasticity Module  
\[
\Delta P_{	ext{weather}} = \gamma \cdot 	ext{GWDD}_{anom}/10
\]  
Base \(\gamma = 0.12\); scaled by Î±(t) = 1 - 0.4Â·surplus_sigma.  

### 4.4Â LNG & Tradeâ€‘Flow Factor  
\[
\Delta P_{	ext{LNG}} = 0.08 	imes (	ext{Feedgas} - 12.7)
\]

### 4.5Â Optionsâ€‘Implied Mean  
*Riskâ€‘neutral expectation* via Carrâ€‘Madan:
\[
\mathbb{E}[P] = \sum_{k} rac{\Delta K}{K^2} C(K)
\]

### 4.6Â ML Residual Learner  
*Features*: rig count lagÂ 6â€¯wk, fracâ€‘spread, ENSO, MJO phase, DOE propane, CVOL, skew.  
*Model*: XGBoost max_depth=4, n_estimators=400, reâ€‘fit monthly.  
*Target*: residual \(P_{	ext{screen}} - P_{	ext{linear\_sum}}\).

---

## 5â€¯|â€¯Bayesian Ensemble

\[
w_i \sim 	ext{Dirichlet}(lpha_i);\quad lpha_i = 1 / 	ext{MAPE}_i (60â€¯d)
\]
\[
	ext{Fairâ€‘Value}_t = \sum_i w_{i,t}\, M_{i,t}
\]

Volatility regime (CVOL 30â€‘d) rescales weights: weather weightâ€¯â†‘ when CVOLâ€¯>â€¯45â€¯vol; storage weightâ€¯â†“ when surplusâ€¯>â€¯300â€¯Bcf.

---

## 6â€¯|â€¯Premium Decomposition & Alerts

| Premium | Formula | Threshold | Action |
|---------|---------|-----------|--------|
| Warâ€‘Risk | \(P_{screen} - P_{FV}\) | >â€¯$0.25 & TTFâ€“HHâ€¯>â€¯$10 | Alert + consider short |
| Specâ€‘Squeeze | CFTC netâ€¯<â€¯â€“2â€¯Ïƒ **AND** CVOLâ€¯+10Â vol | Alert + lower short exposure |
| Scarcity | EOE storage <â€¯3.2â€¯Tcf | Go long outrights / Octâ€‘Jan spreads |

---

## 7â€¯|â€¯Backâ€‘Test & Validation

* Walkâ€‘forward (2017â†’2024)  
* Metrics: RMSE, Directional Accuracy, % trades with >â€¯10â€¯Â¢ edge.  
* Current v1.0: RMSE 9â€¯Â¢, DA 68â€¯%, hitâ€‘rate 75â€¯%.

---

## 8â€¯|Â Reference Implementation (Core Function)

def compute_fair_value(row, coefs, wts):
    # linear components
    d_storage = coefs["sto"] * (row.surplus / 100) + coefs["sto2"] * (row.surplus / 100)**2
    d_weather = coefs["wx"]  * (1 - 0.4*row.surplus/200) * (row.gwdd_anom/10)
    d_lng     = coefs["lng"] * (row.feedgas - 12.7)
    d_prod    = coefs["prod"]* (row.dry_prod - 105)

    linear_sum = 3.60 + d_storage + d_weather + d_lng + d_prod

    # options mean & ML residual
    opt_mean  = row.opt_mean
    ml_resid  = ml_model.predict(row[ml_feats])

    sub_models = np.array([linear_sum, opt_mean, ml_resid, balance_path(row)])
    return float(np.dot(wts, sub_models))

## 9 | GPT Reasoning Engine

The GPT module interprets:
- Fair-value deltas and premium band regimes (noise, actionable, extreme)
- Drivers of forecast changes (e.g. GWDD anomaly flip, LNG outage, storage shock)
- Trade structuring logic (e.g. short NGN25 with 3:1 R/R, target 3.735, stop 3.88)
- Chat-like feedback for traders (e.g. â€œThis is a statistically valid short based on a +0.18Â¢ premium and +350 Bcf surplusâ€)

Execution: Daily inference via OpenAI GPT-4-turbo or local LLM using prompt-injected metadata from data pipeline.
ðŸ”¹ 2. Add Forecast Table Output Template
You want GPT to emit a clean table daily like:

Date	FV	Screen	Premium	Trade Bias	Target	Stop	Confidence
Jun 18	3.735	3.845	+0.11	Short	3.70	3.88	87%

Let GPT generate this on every call.

ðŸ”¹ 3. Add Trigger-Based GPT Commentary Module

## 10 | Trigger Commentary Module

GPT will describe:
- When a trigger fires (e.g. "Premium > $0.15 and CVOL > 50 â†’ mean-reversion short bias")
- The reasoning path behind trade bias
- Confidence bands (e.g. â€œ3.735 target has 75% 3-day probabilityâ€)
- Optional narrative: "This overvaluation is primarily weather-driven but not confirmed by options-implied mean."

Each commentary uses structured prompt templates, updated hourly or daily.
ðŸ”¹ 4. Add a Forecast Deviation Tracker
Have GPT report:

## 11 | Deviation Monitoring

Track when screen price deviates by:
- 10â€“15Â¢: Mean-reversion potential
- >25Â¢: Event-driven setup (GPT explains probable catalyst)
- Detect when options market disagrees with ensemble FV
ðŸ”¹ 5. Add Meta-Prompt for Daily Forecast Runs
Hereâ€™s your optimized GPT prompt to run daily:


You are a Natural Gas fair-value assistant.
Use the ensemble model inputs below:
- Screen price = X.XXX
- Storage surplus = YYY Bcf
- GWDD anomaly = Z
- LNG feedgas = A Bcf/d
- Dry gas prod = B Bcf/d
- Options-implied mean = C.XXX
- CVOL 30d = D vols

1. Compute updated fair value.
2. Calculate the premium vs. screen.
3. Classify regime: noise / actionable / extreme.
4. Generate table of targets + probabilities.
5. Recommend trade (entry/target/stop/confidence).
6. Output GPT commentary.

---
